<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-title>
      Pocket Rick and Morty
    </ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <ion-grid class="ion-padding">
    <ion-row class="ion-align-items-center">
      <ion-col size="9">
        <ion-input [(ngModel)]="nameFind" label="Buscar personaje de Rick y Morty por nombre" label-placement="floating"
          fill="outline" placeholder="Rick Sanchez">
        </ion-input>
      </ion-col>
      <ion-col size="3">
        <ion-button expand="block" (click)="findCharacter()">
          Buscar
        </ion-button>
      </ion-col>
    </ion-row>
  </ion-grid>

  <!-- Lista inicial de personajes solo si NO hay personaje seleccionado -->
  <ion-grid *ngIf="!characterDetails && charactersList.length > 0" class="ion-padding">
    <ion-row>
      <ion-col size="6" size-md="4" *ngFor="let character of charactersList">
        <ion-card class="ion-text-center">
          <img [src]="character.image" [alt]="character.name" />
          <ion-card-title>{{ character.name }}</ion-card-title>
        </ion-card>
      </ion-col>
    </ion-row>
  </ion-grid>

  <!-- Detalles del personaje seleccionado -->
  <ion-card *ngIf="characterDetails" class="ion-text-center">
    <ion-card-header>
      <ion-card-title>{{ characterDetails.name }}</ion-card-title>
    </ion-card-header>

    <ion-card-content>
      <img [src]="characterDetails.image" alt="Imagen de {{ characterDetails.name }}">
      <p><strong>Especie:</strong> {{ characterDetails.species }}</p>
      <p><strong>Estado:</strong> {{ characterDetails.status }}</p>
      <p><strong>Género:</strong> {{ characterDetails.gender }}</p>
      <p><strong>Origen:</strong> {{ characterDetails.origin?.name }}</p>
      <p><strong>Ubicación actual:</strong> {{ characterDetails.location?.name }}</p>
      <p><strong>Episodios donde aparece:</strong> {{ characterDetails.episode?.length }}</p>
      <p><strong>Url del personaje:</strong> {{ characterDetails.url }}</p>

      <ion-textarea [(ngModel)]="opinion" label="Escribe tu opinión" label-placement="floating" fill="outline"
        placeholder="Ej: Me gusta mucho este personaje">
      </ion-textarea>

      <ion-button expand="block" (click)="saveOpinion()">
        Guardar opinión
      </ion-button>
    </ion-card-content>
  </ion-card>
</ion-content>